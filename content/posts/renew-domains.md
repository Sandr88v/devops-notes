---
title: "Проверка срока регистрации доменов"
date: 2024-03-16T17:48:41+03:00
slug: renew_domains
aliases:
  - renew_domains
weight: 10010
toc_hide: true
tags:
  - linux
  - domain
---

## Установка и простая проверка.

Как и в случае с ssl чекером, всё очень просто. Для начала, забираем скрипт с Github страницы проекта:

```
apt-get install mailx git whois
```

```
cd /usr/local/src/
git clone https://github.com/nixcraft/domain-check-2
cd ./domain-check-2
```

Простая проверка домена выглядит так:

```
./domain-check-2.sh -d sysadmin.com
```

Можно собрать все нужные нам домены в один файл и проверить их:

```
cat domains.txt 

google.ru
ya.ru
yandex.ru
```

```
./domain-check-2.sh -f domains.txt
```
## Настройка уведомлений

С помощью дополнительных параметров, с которыми запускается скрипт, мы можем настроить уведомления на email. Параметр -x задаёт количество дней до истечения срока регистрации домена, параметр -a, включает отправку на email, а с помощью -e задаётся email, на который сообщение будет отправлено.

Команда для проверки нескольких имён из файла, с последующим уведомлением об истечении доменов менее чем через 30 дней будет выглядеть так:

```
 ./domain-check-2.sh -a -f domains.txt -q -x 30 -e alert@sysadmin.pm
```
Добавляем эту задачу в планировщик, и получаем готовый к работе мониторинг, который будет своевременно уведомлять нас о необходимости продлить домен.

```
0 21 * * * /home/sysadmin/scripts/domain-check-2.sh -a -f domains.txt -q -x 30 -e alert@sysadmin.com
```

Дополнительно отмечу ещё один аналогичный инструмент dns-domain-expiration-checker, но написанный уже на питоне. 



